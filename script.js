const poem = `
我们相聚的每一刻
都当做节日在庆祝
世界只有你我
比鸟更轻盈勇敢的你
飞奔下环旋的楼梯
带我穿过丁香花丛
来到你的领地
镜子的另一边

夜幕降临，我得到恩准
走近圣坛，黑暗中渐渐显现
你赤裸的身体
我唤道:"祝福你！"
尽管，我知道不该大胆惊扰你
桌上的丁香伸过来轻触你的眼帘
你的眼帘安详平静，双手温暖
水晶中河流奔腾，群山朦胧，大海苍茫
你碰着水晶球，安睡在王座

神啊！你曾属于我
你醒来改变了平凡的人类语言
我的声音充满了洪亮的共鸣
现在"你"有了新的含义——"王"
一切都变了，即使是最平凡的事物
当水晶在我们间泛起层层变幻之时
我们不知身在何处
奇幻的城市，海市蜃楼般飘过
薄荷铺就的路上
鸟与我同行，鱼也逆流跟随
天空展向远方
命运如同挥舞利刃的疯子
紧随在我们身后


昨日我一直在等你，他们猜到你不会来
记得昨日吗?多么晴朗啊！不必穿外套
今日你来了，他们已安排了阴沉的一日
下着雨，天色向晚
雨水滑落冰冷的树枝
言语难以抚慰，手绢难以拭干


我不相信预感，不怕凶兆
不逃避诽谤和诋毁
世上没有死亡
人人不朽，万事恒久
不必惧怕殒命
在十七岁，抑或七十岁
只有真实和光明
没有死亡和黑暗



我们终于抵达了海边
撒出渔网，收获"不朽"的鱼群
住在永不倒塌的房屋里
我召唤所有的世纪
都进去建造房屋
这才有你的妻儿与我同坐一桌
曾祖和曾孙共聚
未来已经实现，如果我举起手
留给你的，将是五道光芒

我以骨骼为支架，撑起逝去的岁月
我漫步丈量时间，如同行走在乌拉尔山脉
我拣取一段，向南而行，草原尘土飞扬
一只闲游的蚱蜢轻触我的马蹄
仿佛僧侣在预言我的死亡
我将命运系在鞍上
像少年般，策马驰向未来

我的不朽已然足够
我的血液已淌过沧海桑田
为了一个温暖的角落
我愿付出性命
只要性命的飞针
不再将我如丝线般拨弄



人只有一个孤独的身体
灵魂厌倦了这副躯壳
它穿过角膜飞向天空
飞向冰封的罗盘，飞向鸟的战车
它听到自己生活的囚牢外
森林的喧嚣，大海的乐章
没有肉体的灵魂一无所有
没有思想，没有行动，
没有意识，没有语言，
没有答案的问题
在无人为伴之地独舞之后
谁还会归来?

我梦见另一模样的灵魂
它燃烧着从羞怯奔向希望
火焰照亮了这个地球
留下几束丁香作为纪念
奔跑吧，孩子
不要悲叹欧律狄刻的命运
驱着你的铜环、跟随那火光
你踏出的每一步即使再轻微
也将听到大地欢快的回响
`.split('\n').filter(line => line.trim() !== '');

// 俄语翻译和对应的音频文件映射
const russianTranslations = {
    "我们相聚的每一刻": {
        text: "Каждый миг нашей встречи"
    },
    "都当做节日在庆祝": {
        text: "Празднуем как праздник"
    },
    "世界只有你我": {
        text: "В мире только ты и я"
    },
    "比鸟更轻盈勇敢的你": {
        text: "Ты, легче и храбрее птицы"
    },
    "飞奔下环旋的楼梯": {
        text: "Сбегаешь по винтовой лестнице"
    },
    "带我穿过丁香花丛": {
        text: "Ведёшь меня сквозь сирень"
    },
    "来到你的领地": {
        text: "К твоим владениям"
    },
    "镜子的另一边": {
        text: "По ту сторону зеркала"
    },
    "夜幕降临，我得到恩准": {
        text: "С наступлением ночи мне дано позволение"
    },
    "走近圣坛，黑暗中渐渐显现": {
        text: "Подойти к алтарю, проявляющемуся во тьме"
    },
    "你赤裸的身体": {
        text: "Твоё обнажённое тело"
    },
    "我唤道:\"祝福你！\"": {
        text: "Я восклицаю: \"Благословляю тебя!\""
    },
    "尽管，我知道不该大胆惊扰你": {
        text: "Хотя знаю, что не должен тревожить тебя"
    },
    "桌上的丁香伸过来轻触你的眼帘": {
        text: "Сирень со стола тянется к твоим векам"
    },
    "你的眼帘安详平静，双手温暖": {
        text: "Твои веки спокойны, руки теплы"
    },
    "水晶中河流奔腾，群山朦胧，大海苍茫": {
        text: "В хрустале бегут реки, горы туманны, море безбрежно"
    },
    "你碰着水晶球，安睡在王座": {
        text: "Ты касаешься хрустального шара, спишь на троне"
    },
    "神啊！你曾属于我": {
        text: "О боже! Ты принадлежал мне"
    },
    "你醒来改变了平凡的人类语言": {
        text: "Проснувшись, ты изменил обычный язык людей"
    },
    "我的声音充满了洪亮的共鸣": {
        text: "Мой голос полон звучного резонанса"
    },
    "现在\"你\"有了新的含义——\"王\"": {
        text: "Теперь \"ты\" обрело новый смысл — \"царь\""
    },
    "一切都变了，即使是最平凡的事物": {
        text: "Всё изменилось, даже самое обыденное"
    },
    "当水晶在我们间泛起层层变幻之时": {
        text: "Когда хрусталь между нами переливается"
    },
    "我们不知身在何处": {
        text: "Мы не знаем, где находимся"
    },
    "奇幻的城市，海市蜃楼般飘过": {
        text: "Фантастические города проплывают миражами"
    },
    "薄荷铺就的路上": {
        text: "На дороге, устланной мятой"
    },
    "鸟与我同行，鱼也逆流跟随": {
        text: "Птицы идут со мной, рыбы плывут против течения"
    },
    "天空展向远方": {
        text: "Небо простирается вдаль"
    },
    "命运如同挥舞利刃的疯子": {
        text: "Судьба как безумец, размахивающий клинком"
    },
    "紧随在我们身后": {
        text: "Следует за нами по пятам"
    },
    "昨日我一直在等你，他们猜到你不会来": {
        text: "Вчера я ждал тебя, они догадались, что ты не придёшь"
    },
    "记得昨日吗?多么晴朗啊！不必穿外套": {
        text: "Помнишь вчерашний день? Какой ясный! Не нужно пальто"
    },
    "今日你来了，他们已安排了阴沉的一日": {
        text: "Сегодня ты пришла, они уже устроили пасмурный день"
    },
    "下着雨，天色向晚": {
        text: "Идёт дождь, вечереет"
    },
    "雨水滑落冰冷的树枝": {
        text: "Дождь стекает по холодным ветвям"
    },
    "言语难以抚慰，手绢难以拭干": {
        text: "Слова не утешают, платок не осушает"
    },
    "我不相信预感，不怕凶兆": {
        text: "Я не верю предчувствиям, не боюсь дурных знамений"
    },
    "不逃避诽谤和诋毁": {
        text: "Не бегу от клеветы и поношений"
    },
    "世上没有死亡": {
        text: "В мире нет смерти"
    },
    "人人不朽，万事恒久": {
        text: "Все бессмертны, всё вечно"
    },
    "不必惧怕殒命": {
        text: "Не нужно бояться гибели"
    },
    "在十七岁，抑或七十岁": {
        text: "В семнадцать лет или в семьдесят"
    },
    "只有真实和光明": {
        text: "Есть только истина и свет"
    },
    "没有死亡和黑暗": {
        text: "Нет смерти и тьмы"
    },
    "我们终于抵达了海边": {
        text: "Мы наконец достигли берега моря"
    },
    "撒出渔网，收获\"不朽\"的鱼群": {
        text: "Забросили сети, поймали \"бессмертных\" рыб"
    },
    "住在永不倒塌的房屋里": {
        text: "Живём в доме, который никогда не рухнет"
    },
    "我召唤所有的世纪": {
        text: "Я призываю все века"
    },
    "都进去建造房屋": {
        text: "Войти и строить дом"
    },
    "这才有你的妻儿与我同坐一桌": {
        text: "И вот твоя семья сидит со мной за одним столом"
    },
    "曾祖和曾孙共聚": {
        text: "Прадеды и правнуки собрались вместе"
    },
    "未来已经实现，如果我举起手": {
        text: "Будущее уже наступило, если я подниму руку"
    },
    "留给你的，将是五道光芒": {
        text: "Тебе останутся пять лучей света"
    },
    "我以骨骼为支架，撑起逝去的岁月": {
        text: "Я использую кости как опору, поддерживая ушедшие годы"
    },
    "我漫步丈量时间，如同行走在乌拉尔山脉": {
        text: "Я меряю время шагами, словно иду по Уральским горам"
    },
    "我拣取一段，向南而行，草原尘土飞扬": {
        text: "Я беру отрезок, иду на юг, степная пыль взвивается"
    },
    "一只闲游的蚱蜢轻触我的马蹄": {
        text: "Праздный кузнечик касается моего копыта"
    },
    "仿佛僧侣在预言我的死亡": {
        text: "Словно монах, предсказывающий мою смерть"
    },
    "我将命运系在鞍上": {
        text: "Я привязываю судьбу к седлу"
    },
    "像少年般，策马驰向未来": {
        text: "Как юноша, скачу в будущее"
    },
    "我的不朽已然足够": {
        text: "Моего бессмертия уже достаточно"
    },
    "我的血液已淌过沧海桑田": {
        text: "Моя кровь уже текла через моря, ставшие полями"
    },
    "为了一个温暖的角落": {
        text: "Ради тёплого уголка"
    },
    "我愿付出性命": {
        text: "Я готов отдать жизнь"
    },
    "只要性命的飞针": {
        text: "Лишь бы игла жизни"
    },
    "不再将我如丝线般拨弄": {
        text: "Больше не дёргала меня как нить"
    },
    "人只有一个孤独的身体": {
        text: "У человека лишь одно одинокое тело"
    },
    "灵魂厌倦了这副躯壳": {
        text: "Душа устала от этой оболочки"
    },
    "它穿过角膜飞向天空": {
        text: "Она пронзает роговицу и летит к небу"
    },
    "飞向冰封的罗盘，飞向鸟的战车": {
        text: "Летит к замёрзшему компасу, к птичьей колеснице"
    },
    "它听到自己生活的囚牢外": {
        text: "Она слышит за пределами своей тюрьмы"
    },
    "森林的喧嚣，大海的乐章": {
        text: "Шум леса, симфонию моря"
    },
    "没有肉体的灵魂一无所有": {
        text: "Душа без тела ничего не имеет"
    },
    "没有思想，没有行动，": {
        text: "Нет мыслей, нет действий,"
    },
    "没有意识，没有语言，": {
        text: "Нет сознания, нет языка,"
    },
    "没有答案的问题:": {
        text: "Вопрос без ответа:"
    },
    "在无人为伴之地独舞之后": {
        text: "После одинокого танца в безлюдном месте"
    },
    "谁还会归来?": {
        text: "Кто ещё вернётся?"
    },
    "我梦见另一模样的灵魂": {
        text: "Я вижу во сне душу иного облика"
    },
    "它燃烧着从羞怯奔向希望": {
        text: "Она горит, убегая от застенчивости к надежде"
    },
    "火焰照亮了这个地球": {
        text: "Пламя освещает эту землю"
    },
    "留下几束丁香作为纪念": {
        text: "Оставляя несколько веток сирени на память"
    },
    "奔跑吧，孩子": {
        text: "Беги, дитя"
    },
    "不要悲叹欧律狄刻的命运": {
        text: "Не оплакивай судьбу Эвридики"
    },
    "驱着你的铜环、跟随那火光": {
        text: "Гони свой медный обруч, следуй за тем огнём"
    },
    "你踏出的每一步即使再轻微": {
        text: "Каждый твой шаг, каким бы лёгким он ни был"
    },
    "也将听到大地欢快的回响": {
        text: "Услышит радостное эхо земли"
    }
};

const container = document.getElementById('poem-container');
let currentIndex = 0;

// 创建语音合成器
const synth = window.speechSynthesis;
let voices = [];

// 等待声音加载
function loadVoices() {
    voices = synth.getVoices();
}

if (speechSynthesis.onvoiceschanged !== undefined) {
    speechSynthesis.onvoiceschanged = loadVoices;
}

function addNewLine() {
    if (currentIndex >= poem.length) {
        currentIndex = 0;
    }

    const line = poem[currentIndex];
    const lineElement = document.createElement('div');
    lineElement.className = 'poem-line';
    
    // 创建中文诗句元素
    const chineseText = document.createElement('div');
    chineseText.className = 'chinese-text';
    chineseText.textContent = line;
    
    // 创建俄语翻译元素
    if (russianTranslations[line]) {
        const russianText = document.createElement('div');
        russianText.className = 'russian-text';
        russianText.textContent = russianTranslations[line].text;
        lineElement.appendChild(russianText);
        
        // 使用语音合成播放俄语
        const utterance = new SpeechSynthesisUtterance(russianTranslations[line].text);
        utterance.lang = 'ru-RU';
        utterance.rate = 0.8; // 语速稍慢
        utterance.pitch = 1;
        
        // 选择俄语声音
        const russianVoice = voices.find(voice => 
            voice.lang.includes('ru') && voice.gender === 'male'
        );
        if (russianVoice) {
            utterance.voice = russianVoice;
        }
        
        synth.speak(utterance);
    }
    
    lineElement.appendChild(chineseText);
    
    // 随机垂直位置
    const randomTop = getRandomNumber(10, window.innerHeight - 50);
    lineElement.style.top = `${randomTop}px`;
    
    container.appendChild(lineElement);

    // 动画结束后移除元素
    lineElement.addEventListener('animationend', () => {
        lineElement.remove();
    });

    currentIndex++;
}

function getRandomNumber(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// 初始启动
setInterval(addNewLine, 4000); // 每4秒添加一个新诗句
addNewLine(); // 立即添加第一句